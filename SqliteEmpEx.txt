java-> com.example.testcrud1 -> new-> java class


Employee.java

package com.example.empcrud2;

public class Employee {
    private int empid;
    private String empname;
    private String salary;
    private String designation;
    private String department;

    public Employee()
    {}

    public Employee(int empid, String empname, String salary, String designation, String department) {
        this.empid = empid;
        this.empname = empname;
        this.salary = salary;
        this.designation = designation;
        this.department = department;
    }

    public Employee(String empname, String salary, String designation, String department) {
        this.empname = empname;
        this.salary = salary;
        this.designation = designation;
        this.department = department;
    }

    public String getSalary() {
        return salary;
    }

    public void setSalary(String salary) {
        this.salary = salary;
    }

    public int getEmpid() {
        return empid;
    }

    public void setEmpid(int empid) {
        this.empid = empid;
    }

    public String getEmpname() {
        return empname;
    }

    public void setEmpname(String empname) {
        this.empname = empname;
    }

    public String getDesignation() {
        return designation;
    }

    public void setDesignation(String designation) {
        this.designation = designation;
    }

    public String getDepartment() {
        return department;
    }

    public void setDepartment(String department) {
        this.department = department;
    }
}

DBHelper.java

package com.example.empcrud2;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.widget.Toast;

import androidx.annotation.Nullable;

public class DBHelper extends SQLiteOpenHelper {

    public static final String tablename = "employeetb";
    public static final String _id = "_id";
    public static final String empname = "employeename";
    public static final String salary = "salary";
    public static final String designation = "designation";
    public static final String department = "department";

    SQLiteDatabase database;
    static final String dbname = "employee1.db";

    Context context;

    static final int dbversion = 1;

    private static final String createtable = "create table " + tablename + "(" + _id + " integer primary key autoincrement," + empname + " text not null," + salary + " text not null," + designation + " text not null," + department + " text not null);";



    public DBHelper(@Nullable Context context) {
        super(context, dbname, null, dbversion);
        this.context = context;
    }

    @Override
    public void onCreate(SQLiteDatabase sqLiteDatabase) {
        sqLiteDatabase.execSQL(createtable);
    }

    @Override
    public void onUpgrade(SQLiteDatabase sqLiteDatabase, int i, int i1) {

    }

    public String insert(Employee e)
    {
        try{
            database =this.getWritableDatabase();
            ContentValues contentValues = new ContentValues();
            contentValues.put(empname,e.getEmpname());
            contentValues.put(salary,e.getSalary());
            contentValues.put(designation,e.getDesignation());
            contentValues.put(department,e.getDepartment());
            long id =database.insert(tablename,null,contentValues);
            Toast.makeText(context, "Inserted " + id, Toast.LENGTH_LONG).show();
            return "Inserted " + id;
        }
        catch (Exception ex)
        {
            Toast.makeText(context, ex.getMessage(), Toast.LENGTH_SHORT).show();
            return ex.getMessage();
        }
    }

    public Cursor fetch()
    {
        database =this.getWritableDatabase();
        String[] columns = new String[] { _id,empname,salary,designation,department };
        Cursor cursor = database.query(tablename,columns,null,null,null,null,null);
        if(cursor != null)
        {
            cursor.moveToFirst();
        }
        return cursor;
    }

    public Employee SearchStudent(int _id) {
        database = this.getReadableDatabase();

        Employee s=new Employee();
        Cursor cursor = database.query(tablename, null, "_id=?", new String[]{_id+""}, null, null, null);
        Toast.makeText(context, "Found "+cursor.getCount() , Toast.LENGTH_LONG).show();
        if (cursor.getCount()>0) {

            cursor.moveToFirst();
//            Toast.makeText(context, "Student"+cursor.getString(1) , Toast.LENGTH_LONG).show();
            s.setEmpid(cursor.getInt(0));
            s.setEmpname(cursor.getString(1));
            s.setSalary(cursor.getString(2));
            s.setDesignation(cursor.getString(3));
            s.setDepartment(cursor.getString(4));
            //Toast.makeText(context, "Student Found "+s.getStudentName() + s.getID() +s.getStudentLName(), Toast.LENGTH_LONG).show();

        }
        return s;
    }

    public String update(Employee e) {
        database = this.getWritableDatabase();

        ContentValues contentValues = new ContentValues();
        contentValues.put(empname, e.getEmpname());
        contentValues.put(salary, e.getSalary());
        contentValues.put(designation, e.getDesignation());
        contentValues.put(department,e.getDepartment());
        int i = database.update( tablename, contentValues,  _id + " = " + e.getEmpid(), null);
        return "Updated"+i;
    }

    public String delete(int _id2) {

        database = this.getWritableDatabase();

        long id=database.delete(tablename,  _id + "=" + _id2, null);
        return  "Deleted "+id;
    }
}

activity_main.xml

<?xml version="1.0" encoding="utf-8"?>
<androidx.constraintlayout.widget.ConstraintLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical"
        app:layout_constraintBottom_toBottomOf="parent"
        app:layout_constraintEnd_toEndOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintTop_toTopOf="parent">

        <EditText
            android:id="@+id/txtEname"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:ems="10"
            android:hint="Enter Name"
            android:inputType="textPersonName" />

        <EditText
            android:id="@+id/txtSalary"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:ems="10"
            android:hint="Enter Salary"
            android:inputType="textPersonName" />

        <EditText
            android:id="@+id/txtDesignation"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:ems="10"
            android:hint="Enter Designation"
            android:inputType="textPersonName" />

        <EditText
            android:id="@+id/txtDepartment"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:ems="10"
            android:hint="Enter Department"
            android:inputType="textPersonName" />

        <Button
            android:id="@+id/btnInsert"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="Insert" />

        <Button
            android:id="@+id/btnShow"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="Show" />
    </LinearLayout>
</androidx.constraintlayout.widget.ConstraintLayout>

MainActivity.java

package com.example.empcrud2;

import androidx.appcompat.app.AppCompatActivity;

import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;

public class MainActivity extends AppCompatActivity {

    EditText txtEname,txtSalary,txtDesignation,txtDepartment;
    Button btnInsert,btnShow;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        txtEname = (EditText) findViewById(R.id.txtEname);
        txtSalary = (EditText) findViewById(R.id.txtSalary);
        txtDesignation = (EditText) findViewById(R.id.txtDesignation);
        txtDepartment = (EditText) findViewById(R.id.txtDepartment);
        btnInsert = (Button) findViewById(R.id.btnInsert);
        btnShow = (Button) findViewById(R.id.btnShow);

        btnInsert.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {
                DBHelper dbHelper = new DBHelper(getApplicationContext());
                String ename = txtEname.getText().toString();
                String sal = txtSalary.getText().toString();
                String des = txtDesignation.getText().toString();
                String dep = txtDepartment.getText().toString();
                Employee emp = new Employee(ename,sal,des,dep);
                String msg = dbHelper.insert(emp);
                Toast.makeText(getApplicationContext(),msg, Toast.LENGTH_LONG).show();
            }
        });

        btnShow.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {
                Intent it = new Intent(getApplicationContext(),ShowActivity.class);
                startActivity(it);
            }
        });

    }
}

activity_show.xml

<?xml version="1.0" encoding="utf-8"?>
<androidx.constraintlayout.widget.ConstraintLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".ShowActivity">

    <LinearLayout
        android:layout_width="0dp"
        android:layout_height="0dp"
        android:layout_marginStart="24dp"
        android:layout_marginTop="24dp"
        android:layout_marginEnd="24dp"
        android:layout_marginBottom="8dp"
        android:orientation="vertical"
        app:layout_constraintBottom_toBottomOf="parent"
        app:layout_constraintEnd_toEndOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintTop_toTopOf="parent">

        <ListView
            android:id="@+id/lv"
            android:layout_width="match_parent"
            android:layout_height="match_parent" />
    </LinearLayout>
</androidx.constraintlayout.widget.ConstraintLayout>

res-> layout-> new-> activity-> empty activity
java-> com.example.testcrud1-> new-> xml-> layout xml file
rowlayout.xml

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent">
    <TextView
        android:id="@+id/tv1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="TextView" />

    <TextView
        android:id="@+id/tv2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="TextView" />

    <TextView
        android:id="@+id/tv3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="TextView" />

    <TextView
        android:id="@+id/tv4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="TextView" />

    <TextView
        android:id="@+id/tv5"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="TextView" />
</LinearLayout>

ShowActivity.java

package com.example.empcrud2;

import androidx.annotation.NonNull;
import androidx.appcompat.app.AppCompatActivity;
import androidx.cursoradapter.widget.SimpleCursorAdapter;

import android.content.Intent;
import android.database.Cursor;
import android.os.Bundle;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.view.View;
import android.widget.AdapterView;
import android.widget.ListView;
import android.widget.Toast;

import java.util.List;

public class ShowActivity extends AppCompatActivity {
    ListView listView;
    private SimpleCursorAdapter adapter;
    DBHelper dbHelper;
    final String[] from = new String[] { dbHelper._id,
            dbHelper.empname, dbHelper.salary,dbHelper.designation,dbHelper.department };
    Cursor cursor;
    final int[] to = new int[] { R.id.tv1, R.id.tv2, R.id.tv3 ,R.id.tv4,R.id.tv5};
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        try {
            setContentView(R.layout.activity_show);
            listView = (ListView) findViewById(R.id.lv);
            dbHelper = new DBHelper(getApplicationContext());
            cursor = dbHelper.fetch();
            Toast.makeText(getApplicationContext(), "Cursor"+cursor.getCount(), Toast.LENGTH_LONG).show();
            listView = (ListView) findViewById(R.id.lv);


            adapter = new SimpleCursorAdapter(this, R.layout.rowlayout, cursor, from, to, 0);
            adapter.notifyDataSetChanged();

            listView.setAdapter(adapter);
            listView.setOnItemClickListener(new AdapterView.OnItemClickListener() {
                @Override
                public void onItemClick(AdapterView<?> parent, View view, int position, long viewId) {

                    cursor.moveToPosition(position);
                    String id=cursor.getString(0);
                    Toast.makeText(getApplicationContext()," ID to "+id,Toast.LENGTH_LONG).show();
                    Intent intent = new Intent(getApplicationContext(), ModifyActivity.class);
                    intent.putExtra("id", id);

                    startActivity(intent);
                }
            });
        }
        catch (Exception ex)
        {
            Toast.makeText(getApplicationContext(),"err"+ex.getMessage(),Toast.LENGTH_LONG).show();
        }
    }
}

activity_modify.xml

<?xml version="1.0" encoding="utf-8"?>
<androidx.constraintlayout.widget.ConstraintLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".ModifyActivity">
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_marginTop="32dp"
        android:orientation="vertical"
        app:layout_constraintBottom_toBottomOf="parent"
        app:layout_constraintEnd_toEndOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintTop_toTopOf="parent">


        <EditText
            android:id="@+id/ed"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:ems="10"
            android:hint="Id"
            android:inputType="textPersonName" />

        <EditText
            android:id="@+id/ed1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:ems="10"
            android:hint="Name"
            android:inputType="textPersonName" />

        <EditText
            android:id="@+id/ed2"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:ems="10"
            android:hint="Salary"
            android:inputType="textPersonName" />

        <EditText
            android:id="@+id/ed3"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:ems="10"
            android:hint="Designation"
            android:inputType="textPersonName" />

        <EditText
            android:id="@+id/ed4"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:ems="10"
            android:hint="Department"
            android:inputType="textPersonName" />

        <TableRow
            android:layout_width="match_parent"
            android:layout_height="match_parent">

            <Button
                android:id="@+id/btnEdit"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Edit" />

            <Button
                android:id="@+id/btnDelete"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Delete" />

        </TableRow>

    </LinearLayout>
</androidx.constraintlayout.widget.ConstraintLayout>

ModifyActivity.java

package com.example.empcrud2;

import androidx.appcompat.app.AppCompatActivity;

import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.Toast;

public class ModifyActivity extends AppCompatActivity {
    Button bedit, bdelete;
    EditText edid,edname,edlname,eddes,eddep;
    DBHelper databaseHelper;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_modify);
        edid=(EditText)findViewById(R.id.ed);
        edname=(EditText)findViewById(R.id.ed1);
        edlname=(EditText)findViewById(R.id.ed2);
        eddes = (EditText) findViewById(R.id.ed3);
        eddep = (EditText) findViewById(R.id.ed4);

        bedit=(Button)findViewById(R.id.btnEdit);
        bdelete=(Button)findViewById(R.id.btnDelete);

        databaseHelper = new DBHelper(getApplicationContext());
        Intent it=getIntent();
        int id=Integer.parseInt( it.getStringExtra("id"));
        Toast.makeText(getApplicationContext(),"ID "+id, Toast.LENGTH_LONG).show();
        Employee ss=databaseHelper.SearchStudent(id);

        if(ss!=null) {
            edid.setText(ss.getEmpid()+"");
            edname.setText(ss.getEmpname());
            edlname.setText(ss.getSalary());
            eddes.setText(ss.getDesignation());
            eddep.setText(ss.getDepartment());
            Toast.makeText(getApplicationContext()," Student found ", Toast.LENGTH_LONG).show();
        }
        else
        {
            Toast.makeText(getApplicationContext(),"No Student found ", Toast.LENGTH_LONG).show();

        }

        bdelete.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {

                databaseHelper = new DBHelper(getApplicationContext());
                int id = Integer.parseInt(edid.getText().toString());
                String msg= databaseHelper.delete(id);
                Toast.makeText(getApplicationContext(),"Deleted "+msg, Toast.LENGTH_LONG).show();
                Intent intent=new Intent(ModifyActivity.this,ShowActivity.class);
                startActivity(intent);
            }
        });
        bedit.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                //MyDBHelper dbHandler = new MyDBHelper(getApplicationContext(), null, null, 1);
                databaseHelper = new DBHelper(getApplicationContext());
                int id = Integer.parseInt(edid.getText().toString());
                String name = edname.getText().toString();
                String lname = edlname.getText().toString();
                String desig = eddes.getText().toString();
                String dept = eddep.getText().toString();
                Employee emp = new Employee(id, name,lname,desig,dept);
                String msg= databaseHelper.update(emp);
                Toast.makeText(getApplicationContext(),"Updated "+msg, Toast.LENGTH_LONG).show();
                Intent intent=new Intent(ModifyActivity.this,ShowActivity.class);
                startActivity(intent);
            }
        });
    }
}
